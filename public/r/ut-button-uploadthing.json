{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ut-button-uploadthing",
  "type": "registry:component",
  "title": "Uploadthing Button",
  "description": "A button taken inspiration from the uploadthing UI",
  "dependencies": [
    "paralleldrive/cuid2@2.2.2",
    "zustand@5.0.3",
    "uploadthing@7.5.2",
    "uploadthing/react@7.3.0",
    "lucide-react@0.471.1"
  ],
  "registryDependencies": [
    "button",
    "sonner"
  ],
  "files": [
    {
      "path": "registry/new-york/ut-button-uploadthing/ut-button-uploadthing.tsx",
      "content": "\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { createId } from \"@paralleldrive/cuid2\";\r\nimport { useRef } from \"react\";\r\nimport DisplayingToasts from \"./displaying-toasts\";\r\nimport { FileStatus, useFilesStore } from \"./store\";\r\n\r\nexport default function UTButtonUploadthing() {\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const { openModel, historicFiles, files, setFiles } = useFilesStore();\r\n\r\n  const handleButtonClick = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    // Open the model\r\n    openModel();\r\n\r\n    const selectedFiles = e.target.files;\r\n    if (selectedFiles && selectedFiles.length > 0) {\r\n      // Convert FileList to Array and add to store\r\n      setFiles(\r\n        Array.from(selectedFiles).map((fileObj) => ({\r\n          file: fileObj,\r\n          id: createId(),\r\n          fileObj,\r\n          status: \"pending\" as FileStatus, // Use type assertion here\r\n          createdAt: new Date(),\r\n        }))\r\n      );\r\n\r\n      // Reset the input to allow selecting the same files again\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = \"\";\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-8 text-sm\">\r\n      <div>\r\n        <input\r\n          type=\"file\"\r\n          ref={fileInputRef}\r\n          onChange={handleFileChange}\r\n          style={{ display: \"none\" }}\r\n          multiple\r\n          accept=\"image/*\"\r\n        />\r\n        <Button onClick={handleButtonClick}>Select Files to Upload</Button>\r\n      </div>\r\n\r\n      {files.map((fileObj) => (\r\n        <DisplayingToasts key={fileObj.id} uploadFile={fileObj} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component"
    }
  ]
}